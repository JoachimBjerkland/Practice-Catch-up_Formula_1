<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formula 1: Historical stats.</title>
    <link href="formula1.css" rel="stylesheet" media="all">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div>
            <h1>The kings of the Formula1</h1>
            <a href="#introduction">Start the story</a>
        </div>
    </header>
    <section id="changingBg" class="scrollContainer">
        <div id="Winner1" class="scrollText">
            <h2>Winner 1</h2>
            <aside class="alignRight">
                <div class="circle greenBg">
                    <span class="big">103</span>
                    <span class="small">Wins</span>
                </div>
            </aside>
            <p>Lewis Hamilton</p>
        </div>
        <div id="Winner2" class="scrollText">
            <h2>Winner 2</h2>
            <aside class="alignRight">
                <div class="circle greenBg">
                    <span class="big">91</span>
                    <span class="small">Wins</span>
                </div>
            </aside>
            <p>Michael Schumacher</p>
        </div>
        <div id="Winner3" class="scrollText">
            <h2>Winner 3</h2>
            <aside class="alignRight">
                <div class="circle greenBg">
                    <span class="big">53</span>
                    <span class="small">Wins</span>
                </div>
            </aside>
            <p>Sebastian Vettel</p>
        </div>
    </section>

    <script>
        const comparison = document.getElementById("comparison");
    
        // Create arrays with the necessary data, to make it available for JavaScript
        const labelData = [];
        data.map((item) => labelData.push(item.Abbreviation));
        const winner1 = [];
        data.map((item) => winner1.push(item.winner1));
        const winner2 = [];
        data.map((item) => winner2.push(item.winner2));
        const winner3 = [];
        data.map((item) => winner3.push(item.winner3));
    
        // Initialize the graph using Chart.js
        new Chart(comparison, {
            type: "bar",
            data: {
                labels: labelData, // Data array made from the data set
                datasets: [
                    {
                        label: "Winner 1",
                        data: winner1 // Data array made from the data set
                    },
                    {
                        label: "Winner 2",
                        data: winner2 // Data array made from the data set
                    },
                    {
                        label: "Winner 3",
                        data: winner3 // Data array made from the data set
                    }
                ]
            },
            options: {
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    
        // Function to check if element is in viewport
        function isInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                // Improved check of viewport for elements exceeding viewport height
                (rect.top <= 0 && rect.bottom >= 0) ||
                (rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                    rect.right <= (window.innerWidth || document.documentElement.clientWidth))
            );
        }
    
        // Make a check when page scrolls:
        document.addEventListener("scroll", function () {
            const changingBg = document.getElementById("changingBg"); // Background element to change
    
            // If a specific id is in the viewport...
            if (isInViewport(document.getElementById("Winner1"))) {
                // Change the background image using inline style
                changingBg.style.backgroundImage = "url(https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Lewis_Hamilton_2017_Malaysia.jpg/640px-Lewis_Hamilton_2017_Malaysia.jpg)";
            }
            if (isInViewport(document.getElementById("Winner2"))) {
                // Change the background image using inline style
                changingBg.style.backgroundImage = "url(https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Schumi_di_GP_Kanada_2011_cropped.jpg/640px-Schumi_di_GP_Kanada_2011_cropped.jpg)";
            }
            if (isInViewport(document.getElementById("Winner3"))) {
                // Change the background image using inline style
                changingBg.style.backgroundImage = "url(https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Sebastian_Vettel_2015_Malaysia_podium_1.jpg/640px-Sebastian_Vettel_2015_Malaysia_podium_1.jpg)";
            }
        }, {
            passive: true
        });
    </script>
    

</body>
</html>
