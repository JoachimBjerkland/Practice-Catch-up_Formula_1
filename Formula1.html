<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formula 1: Historical stats.</title>
    <link href="formula1.css" rel="stylesheet" media="all">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Add CSS styles as needed */
        .scrollImage {
            height: 400px; /* Adjust the height as needed */
            background-size: cover;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <header>
        <div>
            <h1>The kings of the Formula 1</h1>
            <a href="#introduction">Start the story</a>
        </div>
    </header>
    <section class="scrollContainer" id="introduction">
        <div class="scrollText"><p>Here today we will show you.</p></div>
        <div class="scrollText"><p>The top racers with the most wins in formula 1 history</p></div>
        <div class="scrollText"><p>Starting with the top 3 with the most wins</p></div>
    </section>
    <section id="changingBg" class="scrollContainer">
        <div id="winner1" class="scrollText">
            <h2>Lewis Hamilton</h2>
            <aside class="alignRight">
                <div class="circle greenBg">
                    <span class="big">103</span>
                    <span class="small">Wins</span>
                </div>
            </aside>
            <p>Lewis Hamilton is the person with the most wins in formula 1 history</p>
        </div>
        <div id="Winner2" class="scrollText">
            <h2>Michael Schumacher</h2>
            <aside class="alignRight">
                <div class="circle silverBg">
                    <span class="big">91</span>
                    <span class="small">Wins</span>
                </div>
            </aside>
            <p>Michael Schumacher is the 2<sup>th</sup> winner of all time</p>
        </div>
        <div id="Winner3" class="scrollText">
            <h2>Sebastian Vettel</h2>
            <aside class="alignRight">
                <div class="circle bronzeBg">
                    <span class="big">53</span>
                    <span class="small">Wins</span>
                </div>
            </aside>
            <p>Sebastian Vettel is the 3<sup>th</sup> winner of all time</p>
        </div>
        <div id="comparisonchart" class="scrollText">
            <h2>Top 10 winners</h2>
            <p>This is the top ten winners of all time</p>
            <div style="min-height:293px"><script type="text/javascript" defer src="https://datawrapper.dwcdn.net/lTsE3/embed.js?v=1" charset="utf-8"></script><noscript><img src="https://datawrapper.dwcdn.net/lTsE3/full.png" alt="" /></noscript></div>            
            <canvas id="comparison"></canvas>
        </div>
    </section>

    <!-- Add a new div for each section where you want to display images -->
    <div id="imageSection1" class="scrollImage"></div>
    <div id="imageSection2" class="scrollImage"></div>
    <div id="imageSection3" class="scrollImage"></div>
    <div id="imageSection4" class="scrollImage"></div>

    <script>
        const comparison = document.getElementById("comparison");

        // Function to check if element is in viewport
        function isInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                // Improved check of viewport for elements exceeding viewport height
                (rect.top <= 0 && rect.bottom >= 0) ||
                (rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                    rect.right <= (window.innerWidth || document.documentElement.clientWidth))
            );
        }

        //Make a check when page scrolls:
        document.addEventListener('scroll', function () {
            //If a specific id is in the viewport...
            if(isInViewport(document.getElementById("winner1"))) {
                //...change the parent elements background image
                document.getElementById("changingBg").style.backgroundImage = "url(https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Lewis_Hamilton_2014_China.jpg/640px-Lewis_Hamilton_2014_China.jpg)"
            }
            if(isInViewport(document.getElementById("Winner2"))) {
                document.getElementById("changingBg").style.backgroundImage = "url(https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Schumi_di_GP_Kanada_2011_cropped.jpg/640px-Schumi_di_GP_Kanada_2011_cropped.jpg)"
            }
            if(isInViewport(document.getElementById("Winner3"))) {
                document.getElementById("changingBg").style.backgroundImage = "url(https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/2018_British_Grand_Prix_-_Sebastian_Vettel_%2801%29.jpg/640px-2018_British_Grand_Prix_-_Sebastian_Vettel_%2801%29.jpg)"
            }
            if(isInViewport(document.getElementById("comparisonchart"))) {
                document.getElementById("changingBg").style.backgroundImage = "url(https://images.unsplash.com/photo-1578549651688-904046d4c9ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80)"
            }
        }, {
            passive: true
        });
    </script>
</body>
</html>